File,Section/Method,Finding,Why it conflicts (spec),Required Fix,Spec Reference
DualSoraValidationService.cs,CalculateM3Penalties + ApplyFloorRule,Treats 'M3 penalties' as reductions to ARC and applies a floor-rule based on count.,"M1–M3 are the levels of strategic mitigation used to reduce GRC (ground risk), not ARC. OSOs/robustness do not alter ARC; ARC reduction is only via tactical mitigations assessed through TMPR, not 'penalties'.",Delete 'M3 penalties reduce ARC' logic. Keep ARC from the ARC module. Use TMPR assessment only when you actually apply a tactical mitigation path to reduce ARC (initial → residual).,JARUS SORA v2.5 Main Body (Air Risk & tactical mitigations); Annex I Glossary (TMPR).
DualSoraValidationService.cs,ValidateTMPRRequirements,Imposes a generic '80% reliability' threshold and ties TMPR to OSO IDs.,"TMPR is a performance requirement for tactical air risk mitigations (e.g., DAA, ATC coordination). There is no universal 80% threshold and it is not OSO‑scoped.","Make TMPR evaluation mitigation‑specific (e.g., DAA, geo‑awareness, strategic deconfliction). Replace the 80% magic number with concrete metrics for the selected mitigation and evidence of integrity/assurance.",SORA v2.5 Main Body (tactical mitigation step) + Annex I Glossary (TMPR).
DualSoraValidationService.cs,ValidateApplicableOSOs / GetKeyOSOsForValidation,Validates only four hard‑coded OSOs irrespective of SAIL.,OSO applicability is determined by the computed SAIL (matrix). You must check all OSOs required for the SAIL of the operation for the specific SORA version.,Replace hard‑coded list with an OSO‑by‑SAIL requirement matrix (v2.0: 24 OSOs; v2.5: 17 OSOs). Load from a versioned registry and validate all OSOs mandated for the computed SAIL.,SORA v2.5 restructuring introduces a 17‑OSO set; SORA v2.0 uses 24 OSOs. See Main Body/Annex notes.
DualSoraValidationService.cs,ValidateOSOByVersion / ValidateOSO* methods,"Uses ad‑hoc proxies (e.g., VisualObserverCount ≥ 2) and fixed behaviours as pass/fail for OSOs.",OSOs require Levels of Robustness (Integrity + Assurance). Compliance is not a fixed headcount or a single device but evidence that the LoR is met for the mandated OSO at the current SAIL.,"Implement LoR evaluation per OSO using the Integrity & Assurance guidelines; parameterise evidence (procedures, training, tech features, tests, audits) and compute LoR = Integrity × Assurance against the SAIL‑required level.",Integrity & Assurance Guidelines for the SORA (Annex E‑type guidance).
DualSoraValidationService.cs,ValidateOSOByVersion,Assumes same OSO IDs/semantics across 2.0 and 2.5.,SORA v2.5 streamlines and re‑groups OSOs (total 17). One‑to‑one ID/meaning parity with 2.0’s 24 OSOs is not guaranteed.,Introduce a versioned OSO registry with a crosswalk table (2.0 ↔ 2.5). Fail fast if an OSO ID is not available in the selected version and map semantics via the crosswalk where appropriate.,SORA v2.5 public release notes indicate restructured OSOs and Annex D update.
DualSoraValidationService.cs,ApplyFloorRule,Recomputes ARC from OSO outcomes (and 'M3 penalties').,OSO results do not modify ARC/SAIL. ARC comes from the air‑risk path (with optional tactical mitigations + TMPR). SAIL is derived from GRC×ARC; OSOs are then requirements driven by SAIL.,Remove ARC adjustments here. Compute SAIL once from Final GRC and Residual ARC in the SAIL matrix. Use OSO results only to decide acceptability (pass/fail) or added assurances—not to change ARC/SAIL.,SORA method sequence (Main Body): GRC → ARC → SAIL → OSOs.
DualSoraValidationService.cs,RecalculateSAIL,Returns a placeholder SAIL=3 and suggests SAIL can be recalculated after OSO checks.,SAIL is determined from the risk assessment inputs (Final GRC & Residual ARC). OSO compliance does not change SAIL; it determines whether the SAIL’s mandatory OSOs are satisfied.,Implement the official SAIL matrix: compute SAIL from Final GRC and Residual ARC (per version). Remove any OSO‑driven SAIL recomputation.,SORA v2.5 Main Body; SORA v2.0 Main Body (SAIL matrix).
DualSoraValidationService.cs,DetermineOverallCompliance,Allows 'OSO not compliant but TMPR applied' to count as compliant; compares to a 'TargetSAIL'.,TMPR is unrelated to OSO compliance. There is no 'target SAIL' in SORA; SAIL is computed. Acceptance hinges on meeting all mandatory OSOs for the computed SAIL (with adequate robustness).,"Overall PASS only if: (1) all OSOs required for the computed SAIL are met at required LoR, and (2) any claimed ARC reduction via tactical mitigations satisfies TMPR. Drop 'TargetSAIL'.",SORA method sequence + OSO/LoR concept (Annex E‑type guidance).
DualSoraValidationService.cs,ValidateTMPRRequirements,Selects TMPR checks via GetTMPRRequiredOSOs (OSO‑centric API).,"TMPR attaches to the tactical mitigation path (e.g., ATC/strategic deconfliction, DAA). It is not driven by OSO IDs.","Refactor to 'GetTMPRForMitigationPath' (per chosen mitigation). Validate the specific TMPR metrics (detection/classification rates, alerting/latency, geometry) and supporting evidence.",SORA v2.5 Main Body (tactical mitigations) + Glossary (TMPR).
DualSoraValidationService.cs,ValidateOSO11/17/19/23 (both versions),"Embeds non‑spec numeric thresholds (e.g., ≥2 observers, GPS buffer ≥10m).","SORA specifies outcomes and robustness levels, not universal observer counts or arbitrary GPS buffers. Such numbers must come from the operational safety case and LoR evidence.",Parameterise these thresholds in an evidence model and validate against the LoR tables (Integrity/Assurance) for each OSO and SAIL.,Integrity & Assurance guidelines; OSO/LoR approach.
DualSoraValidationService.cs,RiskMitigationMatrix / Recommendations,"Mixes GRC strategic mitigations (M1–M3), ARC tactical mitigations (TMPR), and OSO robustness in one bucket.","These are three distinct layers in SORA (ground, air, organisational/technical objectives).",Keep three pipelines and surfaces: (A) GRC with M1–M3; (B) ARC with optional tactical mitigations + TMPR; (C) OSO/LoR checks by SAIL. Present them separately in outputs/logs.,SORA method sequence across Main Body + Annexes.
DualSoraValidationService.cs,Logging & Exceptions,Throws for missing OSO IDs but does not indicate versioned matrix expectations to the caller.,DevX issue: the caller needs to know which OSOs are mandated for the SAIL under the selected version.,"On start, emit the versioned OSO‑by‑SAIL matrix in the response context and fail fast with actionable guidance (list of required OSOs, LoR levels) when any is missing.",Operationalisation of SORA OSO tables (Annex D/Release notes).
DualSoraValidationService.cs,Data Model (ComprehensiveValidationRequest/Response),Contains 'TargetSAIL' and lacks fields for LoR evidence and mitigation path.,"SORA requires LoR evidence per OSO, and an explicit description of any tactical mitigation used to reduce ARC; there is no 'target SAIL'.","Remove TargetSAIL. Add fields: FinalGRC, ResidualARC, ComputedSAIL, AppliedTacticalMitigation (enum), TMPRMetrics, OSOEvidence[OSO]->{Integrity, Assurance, Artefacts}.",SORA v2.5 Main Body + Integrity & Assurance guidelines.
DualSoraValidationService.cs,Recommendations,Generic messages; not tied to OSO robustness gaps or TMPR deltas.,Decisioning should point to the missing robustness (Integrity/Assurance) per OSO and to performance gaps in TMPR if a tactical mitigation is claimed.,"Generate gap‑analysis per OSO vs required LoR and per TMPR metric vs required performance; include concrete actions (procedures, training, tests, equipment).",Integrity & Assurance guidelines; TMPR concepts in Main Body.
