## Summary

Î•Î½Î¿Ï€Î¿Î¯Î·ÏƒÎ· Ï„Î¿Ï… **12-page Mission Planner UI** (commit b278cc1) Î¼Îµ Ï„Î¿ **Phase 6 Airspace & Maps** (commit 3971c9c). Î ÏÎ¿ÏƒÏ„Î¯Î¸ÎµÎ½Ï„Î±Î¹ 2D/3D viewer (MapLibre GL JS / CesiumJS), import/export routes (GeoJSON/KML/CSV), CGA & geofence drawing, EU airspace layers, SORA badges (iGRC / Final GRC / Initial ARC / Residual ARC / SAIL), ERP/TMPR checklist ÎºÎ±Î¹ validation console. Î¤Î¿ UI ÎµÎ¯Î½Î±Î¹ Ï€Î»Î®ÏÏ‰Ï‚ ÎµÏ…Î¸Ï…Î³ÏÎ±Î¼Î¼Î¹ÏƒÎ¼Î­Î½Î¿ Î¼Îµ **JARUS SORA 2.5 Annex B** & **SORA 2.0 AMC1 Art.11** (enums, dropdowns, schema).

## Why

- **ÎŸÏ€Ï„Î¹ÎºÎ¿Ï€Î¿Î¯Î·ÏƒÎ· mission geometry & airspace layers** Î³Î¹Î± ÎµÏ€Î±Î»Î·Î¸ÎµÏÏƒÎ¹Î¼Î¿Ï…Ï‚ Ï…Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼Î¿ÏÏ‚ GRC/ARC/SAIL.
- **Standardized import/export** Î³Î¹Î± ÎµÏÎºÎ¿Î»Î· ÎµÎ½ÏƒÏ‰Î¼Î¬Ï„Ï‰ÏƒÎ· ÏƒÎµ OM/Reports ÎºÎ±Î¹ ÎµÏ€Î±Î½Î­Î»ÎµÎ³Ï‡Î¿.
- **Î£Ï…Î½ÎµÏ€Î­Ï‚ UI shell** Î³Î¹Î± ÏŒÎ»Î± Ï„Î± SORA/PDRA/STS flows.

## Scope

- **airspace-maps.html**: 2D/3D toggle, sidebar (Import/Draw/Layers/Export), right-panel (SORA badges, ERP/TMPR, geometry stats, console).
- **assets/airspace.js**: Map engine (MapLibre + Cesium), parsers GeoJSON/KML/CSV, route builder, CGA/geofence, EU layers (RMZ/TMZ/CTR/TMA/ATZ/P/R/D/TSA/TRA/CBA/UAS/Population/Buildings), POST `/api/v1/sora/calculate`.
- **styles.css**: maps-layout grid, panels, badges.
- **Samples**: `mission_facade.geojson`, `mission_roof.kml`, `mission_solar.csv`.
- **Tests**: `airspace.spec.ts` (18 e2e tests: 2D/3D toggle, layers, draw, import/export, SORA badges, ban-tokens).

## Compliance Guardrails

- **EU-only airspace terminology** (CTR/TMA/ATZ/RMZ/TMZ/P/R/D/TSA/TRA/CBA/UAS Geo Zones).
- **Ban tokens**: no ACE, no Mode-S veil.
- **Dropdowns & schemas locked**:
  - **SORA 2.5**: M1A `None|Low`, M1B `None|Medium|High`, M1C `None|Low`, M2 `None|Low|Medium|High`, Small-UA rule.
  - **SORA 2.0**: M1 `None|Low|Medium|High` (column-min clamp), M2 `None|Low|High`, M3 `None|Adequate|Validated` (+1/0/âˆ’1).

## Verification

- âœ… **Unit/Golden**: 19/19 passing (GRC/ARC/SAIL).
- âœ… **E2E Maps**: 18/18 passing (`airspace.spec.ts`).
- âœ… **Manual smoke**: (Î´Î­Ï‚ checklist Ï€Î±ÏÎ±ÎºÎ¬Ï„Ï‰) ÏŒÎ»Î± ÎŸÎš.

## Notes

- Î‘Î½ Î¿ backend Î´ÎµÎ½ Î±ÎºÎ¿ÏÎµÎ¹ ÏƒÏ„Î¿ `/api/v1/sora/calculate`, Î­Î³Î¹Î½Îµ best-effort mapping ÏƒÏ„Î¿ UI.
- Î“Î¹Î± CesiumJS terrain Î±Ï€Î±Î¹Ï„ÎµÎ¯Ï„Î±Î¹ **CESIUM_ION_TOKEN** (env/secret).
- **CORS**: Î‘Î½ UI/API ÏƒÎµ Î´Î¹Î±Ï†Î¿ÏÎµÏ„Î¹ÎºÏŒ origin, ÎµÏ€Î­ÎºÏ„ÎµÎ¹Î½Îµ CORS ÏƒÏ„Î¿ API.

---

## âœ… Merge Checklist

- [ ] CI green: 19/19 unit+golden, 18/18 e2e (Playwright).
- [ ] Ban-tokens scan: OK (no ACE, no Mode-S veil).
- [ ] `/api/v1/sora/calculate` returns `{initialGrc, finalGrc, arc.initial, arc.residual, sail}`.
- [ ] Cesium ION token configured (Î±Î½ Î¸Î­Î»Î¿Ï…Î¼Îµ terrain).
- [ ] Static files served (ASP.NET `UseStaticFiles` enabled).
- [ ] ZIP artifact: `dist/skyworks_static_ui.zip` Ï…Ï€Î¬ÏÏ‡ÎµÎ¹ & Î±Î½Î¿Î¯Î³ÎµÎ¹.

**Suggested strategy**: Squash & merge â†’ tag vX.Y.1.

---

## ğŸ§ª Manual Smoke Tests (2â€² total)

1. Import GeoJSON (`mission_facade.geojson`) â†’ ÎµÎ¼Ï†Î±Î½Î¯Î¶ÎµÏ„Î±Î¹ route + CGA.
2. Toggle 2D/3D â†’ camera fly-to ÏƒÏ„Î¿ mission Ï‡Ï‰ÏÎ¯Ï‚ errors.
3. Layers â†’ enable RMZ, CTR, UAS Geo Zones (render ON/OFF).
4. Draw â†’ Add waypoint â†’ Draw geofence (500mÃ—150m) â†’ Draw CGA polygon.
5. SORA POST â†’ badges Î³ÎµÎ¼Î¯Î¶Î¿Ï…Î½ (iGRC/Final GRC/Initial ARC/Residual ARC/SAIL).
6. Export â†’ GeoJSON/KML/CSV ÎºÎ±Ï„ÎµÎ²Î±Î¯Î½Î¿Ï…Î½.
7. Console â†’ ÎµÎ¼Ï†Î±Î½Î¯Î¶ÎµÎ¹ request/response JSON.

---

## ğŸš€ Post-merge plan

1. **Tag**: `git tag -a vX.Y.1 -m "UI + Phase 6 Maps"` & push.
2. **Staging deploy** â†’ smoke run Ï„Î± 7 Î²Î®Î¼Î±Ï„Î±.
3. **Production promote**.
4. **(Optional)** Enable offline tiles cache & NOTAM placeholder ÏƒÏ„Î¿ `airspace.js`.
