File,Section,Severity,Issue,Fix,Spec Reference
arc_calculator.py,Module header docstring,Critical,"Incorrect SORA 2.5 citation: refers to 'Annex B Table B-1' for AEC/ARC, which is Ground Risk in AMC/GM. Air Risk (AEC/ARC) is Annex C.","Update to: 'SORA 2.5 Source: AMC/GM to 2019/947, Annex C — Step #4 (initial ARC, Table C.1) and Step #5 (strategic mitigation, Table C.2); Step #6 TMPR in Annex D.'",EASA Easy Access Rules (Jul 2024): 2.4.2 Step #4; 2.4.3 Step #5; 2.4.4 Step #6; Annex C Tables C.1 & C.2; Annex D.
arc_calculator.py,EnvironmentType enum,High,SORA 2.5 uses 'populated area' vs 'rural area'; 'Suburban' is not a defined category.,"For SORA 2.5 paths, map SUBURBAN → URBAN (populated area). Keep 2.0 logic separate if needed.","AMC/GM Annex C, C.4.3 ‘environment’ text defines ‘rural area’; populated area implied by contrast."
arc_calculator.py,calculate_arc_2_5 – airport/heliport handling,Critical,Near-aerodrome logic mapped to AEC 7 is incorrect. Airport/heliport environments correspond to AEC 1 (Class B/C/D) or AEC 6 (Class E/F/G).,Replace 'near aerodrome' special case with explicit airport/heliport environment: if airport/heliport & Class B/C/D → AEC 1 → ARC‑d; if airport/heliport & Class E/F/G → AEC 6 → ARC‑c.,"Annex C, Table C.1 — AEC 1 & AEC 6 definitions."
arc_calculator.py,calculate_arc_2_5 – Mode‑S/TMZ logic,High,Below/above threshold mapping not aligned with Table C.1.,Set: AEC 7 (<150 m in Mode‑S Veil or TMZ) → ARC‑c; AEC 2 (≥150 m in Mode‑S Veil or TMZ) → ARC‑d.,"Annex C, Table C.1 — AEC 7 and AEC 2 rows."
arc_calculator.py,calculate_arc_2_5 – controlled non‑airport logic,High,General controlled mapping is simplified; should follow AEC 8 (<150 m) and AEC 3 (≥150 m).,If controlled (B/C/D/E) and not airport/heliport: <150 m → AEC 8 → ARC‑c; ≥150 m → AEC 3 → ARC‑d. Apply environment split only where Table C.1 requires it.,"Annex C, Table C.1 — AEC 8 and AEC 3."
arc_calculator.py,calculate_arc_2_5 – uncontrolled non‑airport logic,High,Uses 120 m threshold and a generic ‘consult authority’ branch.,Use the 150 m threshold per SORA 2.5: <150 m → AEC 9 (urban) → ARC‑c; AEC 10 (rural) → ARC‑b. ≥150 m → AEC 4 (urban) → ARC‑c; AEC 5 (rural) → ARC‑c.,"Annex C, Table C.1 — AEC 9/10 (<150 m) and AEC 4/5 (≥150 m)."
arc_calculator.py,calculate_arc_2_5 – ‘≥120 m uncontrolled’ branch,Critical,Hard‑coded 120 m cap conflates Open Category altitude with Specific Category SORA. SORA 2.5 uses 150 m split for ARC logic.,"Remove 120 m cap; implement 150 m split only, as per Table C.1; above 150 m in uncontrolled remains within SORA subject to ARC per AEC 4/5.","Annex C, Table C.1 and 2.4.2 Step #4 description."
arc_calculator.py,calculate_arc_2_5 – atypical/segregated,Medium,Correct in spirit but should reference AEC 12 explicitly and note ARC‑a requires authority acceptance.,Set AEC 12 → ARC‑a path and annotate that lowering to residual ARC‑a requires meeting C.6.1 and competent authority acceptance.,"Annex C, Table C.1 (AEC 12) and C.6.1 ‘Lowering … to residual ARC‑a’."
arc_calculator.py,calculate_arc_2_5 – high‑altitude ops,Low,No handling of AEC 11 (FL600 and above → ARC‑b).,Add guard: if operation volume ≥ FL600 → AEC 11 → ARC‑b.,"Annex C, Table C.1 — AEC 11."
arc_calculator.py,_apply_strategic_mitigations (general),Critical,‘Each SM reduces ARC by 1’ is not compliant. Table C.2 governs allowable reduction (by local density) and common structures & rules are capped at 1 level; some AEC rows disallow reductions.,"Implement Table C.2 logic: (i) density‑based reduction to the allowed residual ARC per row; (ii) optional +1 level via ‘common structures & rules’ ONLY for AEC 7–10; no reductions for AEC 1–5, 11; cap cumulative reduction accordingly.","Annex C, Table C.2; C.6.3 and C.6.4 text (limits and eligible AECs)."
arc_calculator.py,_apply_strategic_mitigations – floor rules,High,Floor rules are simplified. Residual ARC‑a requires atypical/segregated and authority acceptance; otherwise floor at ARC‑b is acceptable but should be tied to C.6.1.,Keep floor ≥ ARC‑b for typical ops; allow ARC‑a only under AEC 12 path per C.6.1 with competent authority acceptance.,"Annex C, C.6.1; Table C.1 AEC 12."
arc_calculator.py,Terms: Mode‑S veil vs TMZ/RMZ,Info,EU SORA references ‘Mode‑S veil or TMZ’; RMZ may also be relevant nationally.,"Keep ‘Mode‑S veil or TMZ’ wording; optionally add RMZ handling per national GIS layer, but do not conflate with AEC 7/2 unless mandated.","Annex C, Table C.1 (uses ‘Mode‑S Veil or TMZ’)."
arc_calculator.py,ARCRequest_2_5 fields,Medium,"Frontend provides 'is_airport_heliport' flag; backend ignores it, forcing ad‑hoc ‘near aerodrome’ logic.",Add/consume 'is_airport_heliport' → branch to AEC 1/6 logic; remove distance‑based ‘near aerodrome’ heuristics.,"Annex C, Table C.1 — airport/heliport rows drive AEC; no fixed distance thresholds in SORA tables."
arc_calculator.py,SORA 2.0 comments,Medium,2.0 references are generic; altitude split of 500 ft is carried over but not cited.,Either (a) add explicit JARUS 2.0 citation for Step #4 AEC mapping; or (b) gate 2.0 logic behind ‘legacy’ mode and prioritise 2.5 AMC/GM as normative for EU OA today.,JARUS SORA 2.0 (JAR‑DEL‑WG6‑D.04) Step #4; TMPR guidance in Annex D.
arc_calculator.py,Notes in responses (2.5),Low,Notes still mention ‘urban/suburban’ and do not cite Table IDs.,Change wording to ‘populated area’ vs ‘rural area’ and embed ‘AEC x per Table C.1; residual via Table C.2’.,"Annex C, Tables C.1/C.2."
arc_calculator.py,Unit thresholds (2.5),Medium,Mixed 120 m and 150 m thresholds.,Standardise on 150 m split for SORA 2.5 ARC logic; keep 120 m out of ARC logic (belongs to Open category).,"Annex C, Table C.1 — uses 150 m (~500 ft) split."
